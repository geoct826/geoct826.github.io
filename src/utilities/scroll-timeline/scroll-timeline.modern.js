!function(){let e=new WeakMap;function t(e){const t=[];for(let i=0;i<e.length;i++)t[i]="number"==typeof(n=e[i])?new CSSUnitValue(n,"number"):n;var n;return t}class n{constructor(n,i,r,s){e.set(this,{values:t(n),operator:i,name:r||i,delimiter:s||", "})}get operator(){return e.get(this).operator}get values(){return e.get(this).values}toString(){const t=e.get(this);return`${t.name}(${t.values.join(t.delimiter)})`}}const i={CSSUnitValue:class{constructor(t,n){e.set(this,{value:t,unit:n})}get value(){return e.get(this).value}set value(t){e.get(this).value=t}get unit(){return e.get(this).unit}toString(){const t=e.get(this);return`${t.value}${function(e){switch(e){case"percent":return"%";case"number":return"";default:return e.toLowerCase()}}(t.unit)}`}},CSSKeywordValue:class{constructor(e){this.value=e}toString(){return this.value.toString()}},CSSMathSum:class extends n{constructor(e){super(arguments,"sum","calc"," + ")}},CSSMathProduct:class extends n{constructor(e){super(arguments,"product","calc"," * ")}},CSSMathNegate:class extends n{constructor(e){super([arguments[0]],"negate","-")}},CSSMathNegate:class extends n{constructor(e){super([1,arguments[0]],"invert","calc"," / ")}},CSSMathMax:class extends n{constructor(){super(arguments,"max")}},CSSMathMin:class extends n{constructor(){super(arguments,"min")}}};if(!window.CSS&&!Reflect.defineProperty(window,"CSS",{value:{}}))throw Error("Error installing CSSOM support");window.CSSUnitValue||["number","percent","em","ex","px","cm","mm","in","pt","pc","Q","vw","vh","vmin","vmax","rems","ch","deg","rad","grad","turn","ms","s","Hz","kHz","dppx","dpi","dpcm","fr"].forEach(e=>{if(!Reflect.defineProperty(CSS,e,{value:t=>new CSSUnitValue(t,e)}))throw Error(`Error installing CSS.${e}`)});for(let e in i)if(!(e in window)&&!Reflect.defineProperty(window,e,{value:i[e]}))throw Error(`Error installing CSSOM support for ${e}`)}(),new CSSKeywordValue("auto");let e=new WeakMap;function t(e){return e===document.scrollingElement?document:e}function n(t){r(t);let n=e.get(t).animations;if(0===n.length)return;let i=t.currentTime;for(let e=0;e<n.length;e++)n[e].tickAnimation(i)}function i(e,t){if(!e)return null;const n="horizontal-tb"==getComputedStyle(e).writingMode;let i=e.scrollTop;return("horizontal"==t||"inline"==t&&n||"block"==t&&!n)&&(i=Math.abs(e.scrollLeft)),i}function r(t){if(!(t instanceof v))return void function(t){const n=e.get(t);n.anonymousSource&&s(t,u(n.anonymousSource,n.anonymousTarget))}(t);const n=t.subject;n&&"none"!=getComputedStyle(n).display?s(t,p(n)):s(t,null)}function s(i,r){const s=e.get(i),a=s.source,o=s.scrollListener;if(a!=r&&(a&&o&&t(a).removeEventListener("scroll",o),e.get(i).source=r,r)){const e=()=>{n(i)};t(r).addEventListener("scroll",e),s.scrollListener=e}}function a(t,n){let i=e.get(t).animations;for(let e=0;e<i.length;e++)i[e].animation==n&&i.splice(e,1)}function o(t,i,r){let s=e.get(t).animations;for(let e=0;e<s.length;e++)if(s[e].animation==i)return;s.push({animation:i,tickAnimation:r}),n(t)}class l{constructor(t){e.set(this,{source:null,orientation:"block",anonymousSource:t?t.anonymousSource:null,anonymousTarget:t?t.anonymousTarget:null,subject:null,inset:t?t.inset:null,animations:[],scrollListener:null}),s(this,t&&void 0!==t.source?t.source:document.scrollingElement),this.orientation=t&&t.orientation||"block",n(this)}set source(e){s(this,e),n(this)}get source(){return e.get(this).source}set orientation(t){if(-1===["block","inline","horizontal","vertical"].indexOf(t))throw TypeError("Invalid orientation");e.get(this).orientation=t,n(this)}get orientation(){return e.get(this).orientation}get duration(){return CSS.percent(100)}get phase(){const e=this.source;if(!e)return"inactive";let t=getComputedStyle(e);return"none"==t.display?"inactive":e==document.scrollingElement||"visible"!=t.overflow&&"clip"!=t.overflow?"active":"inactive"}get currentTime(){const e=this.source;if(!e)return null;if("inactive"==this.phase)return null;const t=this.orientation,n=i(e,t),r=function(e,t){const n="horizontal-tb"==getComputedStyle(e).writingMode;return"block"===t?t=n?"vertical":"horizontal":"inline"===t&&(t=n?"horizontal":"vertical"),"vertical"===t?e.scrollHeight-e.clientHeight:"horizontal"===t?e.scrollWidth-e.clientWidth:void 0}(e,t);return r>0?CSS.percent(100*n/r):CSS.percent(100)}get __polyfill(){return!0}}function c(e,t){let n=e.parentElement;for(;null!=n;){if(t(n))return n;n=n.parentElement}}function u(e,t){return"root"==e?document.scrollingElement:p(t)}function m(e){switch(getComputedStyle(e).display){case"block":case"inline-block":case"list-item":case"table":case"table-caption":case"flow-root":case"flex":case"grid":return!0}return!1}function h(e){const t=getComputedStyle(e);return"none"!=t.transform||"none"!=t.perspective||"transform"==t.willChange||"perspective"==t.willChange||"none"!=t.filter||"filter"==t.willChange||"none"!=t.backdropFilter}function d(e){return"static"!=getComputedStyle(e).position||h(e)}function f(e){switch(getComputedStyle(e).position){case"static":case"relative":case"sticky":return c(e,m);case"absolute":return c(e,d);case"fixed":return c(e,h)}}function p(e){if(e){for(;e=f(e);)switch(getComputedStyle(e)["overflow-x"]){case"auto":case"scroll":case"hidden":return e==document.body&&"visible"==getComputedStyle(document.scrollingElement).overflow?document.scrollingElement:e}return document.scrollingElement}}function g(t,n){const i=e.get(t);return"inactive"===t.phase?null:t instanceof v?T(n,t.source,t.subject,i.orientation,i.inset):null}function T(e,t,n,i,r){let s=0,a=0,o=n;const l=t.offsetParent;for(;o&&o!=l;)a+=o.offsetLeft,s+=o.offsetTop,o=o.offsetParent;a-=t.offsetLeft+t.clientLeft,s-=t.offsetTop+t.clientTop;const c=getComputedStyle(t),u="horizontal-tb"==c.writingMode;let m,h,d;"horizontal"==i||"inline"==i&&u||"block"==i&&!u?(m=n.clientWidth,h=a,("rtl"==c.direction||"vertical-rl"==c.writingMode)&&(h+=t.scrollWidth-t.clientWidth),d=t.clientWidth):(m=n.clientHeight,h=s,d=t.clientHeight);const f=function(e,t){const n={start:0,end:0};if(!e)return n;const i=e.split(" "),r=[];if(i.forEach(e=>{e.endsWith("%")?r.push(t/100*parseFloat(e)):e.endsWith("px")?r.push(parseFloat(e)):"auto"===e&&r.push(0)}),r.length>2)throw TypeError("Invalid inset");return 1==r.length?(n.start=r[0],n.end=r[0]):2==r.length&&(n.start=r[0],n.end=r[1]),n}(r,d),p=h-d+f.end,g=h+m-f.start,T=p+m,y=g-m,S=Math.min(T,y),v=Math.max(T,y);let b,E;switch(e){case"cover":b=p,E=g;break;case"contain":b=S,E=v;break;case"enter":b=p,E=S;break;case"exit":b=v,E=g}return{start:b,end:E}}function y(e,t,n){return S(g(e,t),n,g(e,"cover"))}function S(e,t,n){return e&&n?(t.value/100*(e.end-e.start)+e.start-n.start)/(n.end-n.start):0}class v extends l{constructor(t){t.axis&&(t.orientation=t.axis),super(t),e.get(this).subject=t&&t.subject?t.subject:void 0,r(this),n(this)}get source(){return r(this),e.get(this).source}set source(e){throw new Error("Cannot set the source of a view timeline")}get subject(){return e.get(this).subject}get axis(){return e.get(this).orientation}get currentTime(){const e=null,t=i(this.source,this.orientation);if(t==e)return e;const n=g(this,"cover");return n?CSS.percent((t-n.start)/(n.end-n.start)*100):e}}const b=window.Element.prototype.animate,E=window.Animation,w=["enter","exit","cover","contain"];class k{constructor(){this.state="pending",this.nativeResolve=this.nativeReject=null,this.promise=new Promise((e,t)=>{this.nativeResolve=e,this.nativeReject=t})}resolve(e){this.state="resolved",this.nativeResolve(e)}reject(e){this.state="rejected",this.promise.catch(()=>{}),this.nativeReject(e)}}function x(e){e.readyPromise=new k,requestAnimationFrame(()=>{null!==e.timeline.currentTime&&z(e)})}function I(){return new DOMException("The user aborted a request","AbortError")}function M(e,t){if(null===t)return t;if("number"!=typeof t)throw new DOMException(`Unexpected value: ${t}.  Cannot convert to CssNumberish`,"InvalidStateError");const n=_(e);return CSS.percent(n?100*t/n:0)}function N(e,t){if(e.timeline){if(null===t)return t;if("percent"===t.unit){const n=_(e);return t.value*n/100}throw new DOMException("CSSNumericValue must be a percentage for progress based animations.","NotSupportedError")}{if(null==t||"number"==typeof t)return t;const e=t.to("ms");if(convertTime)return e.value;throw new DOMException("CSSNumericValue must be either a number or a time value for time based animations.","InvalidStateError")}}function R(e){if(!e.finishedPromise||"pending"!=e.finishedPromise.state)return;if("finished"!=e.proxy.playState)return;e.finishedPromise.resolve(e.proxy),e.animation.pause();const t=new CustomEvent("finish",{detail:{currentTime:e.proxy.currentTime,timelineTime:e.proxy.timeline.currentTime}});Object.defineProperty(t,"currentTime",{get:function(){return this.detail.currentTime}}),Object.defineProperty(t,"timelineTime",{get:function(){return this.detail.timelineTime}}),requestAnimationFrame(()=>{queueMicrotask(()=>{e.animation.dispatchEvent(t)})})}function C(e){return null!==e.pendingPlaybackRate?e.pendingPlaybackRate:e.animation.playbackRate}function P(e){null!==e.pendingPlaybackRate&&(e.animation.playbackRate=e.pendingPlaybackRate,e.pendingPlaybackRate=null)}function A(e){if(!e.timeline)return null;const t=N(e,e.timeline.currentTime);if(null===t)return null;if(null===e.startTime)return null;let n=(t-e.startTime)*e.animation.playbackRate;return-0==n&&(n=0),n}function O(e,t){if(!e.timeline)return null;const n=N(e,e.timeline.currentTime);return null==n?null:n-t/e.animation.playbackRate}function L(e,t,n){if(!e.timeline)return;let i=t?N(e,e.proxy.currentTime):A(e);if(i&&null!=e.startTime&&!e.proxy.pending){const n=C(e),r=_(e);let s=e.previousCurrentTime;n>0&&i>=r?((null===s||s<r)&&(s=r),e.holdTime=t?i:s):n<0&&i<=0?((null==s||s>0)&&(s=0),e.holdTime=t?i:s):0!=n&&(t&&null!==e.holdTime&&(e.startTime=O(e,e.holdTime)),e.holdTime=null)}W(e),e.previousCurrentTime=N(e,e.proxy.currentTime),"finished"==e.proxy.playState?(e.finishedPromise||(e.finishedPromise=new k),"pending"==e.finishedPromise.state&&(n?R(e):Promise.resolve().then(()=>{R(e)}))):(e.finishedPromise&&"resolved"==e.finishedPromise.state&&(e.finishedPromise=new k),"paused"!=e.animation.playState&&e.animation.pause())}function _(e){const t=function(e){const t=e.proxy.effect.getTiming();return e.normalizedTiming||t}(e);return Math.max(0,t.delay+t.endDelay+t.iterations*t.duration)}function W(e){if(e.timeline)if(null!==e.startTime){const t=e.timeline.currentTime;if(null==t)return;j(e,(N(e,t)-e.startTime)*e.animation.playbackRate)}else null!==e.holdTime&&j(e,e.holdTime)}function j(e,t){const n=e.timeline,i=e.animation.playbackRate;e.animation.currentTime=t+(n.currentTime&&n.currentTime.value==(i<0?0:100)?i<0?.001:-.001:0)}function V(e,t){if(!e.timeline)return;const n="paused"==e.proxy.playState&&e.proxy.pending;let i=!1,r=null,s=N(e,e.proxy.currentTime);e.resetCurrentTimeOnResume&&(s=null,e.resetCurrentTimeOnResume=!1);const a=C(e),l=_(e);if(a>0&&t&&(null==s||s<0||s>=l))r=0;else if(a<0&&t&&(null==s||s<=0||s>l)){if(Infinity==l)return void e.animation.play();r=l}else 0==a&&null==s&&(r=0);null!=r&&(e.startTime=r,e.holdTime=null,P(e)),o(e.timeline,e.animation,D.bind(e.proxy)),e.holdTime&&(e.startTime=null),e.pendingTask&&(e.pendingTask=null,i=!0),(null!==e.holdTime||null!==r||n||null!==e.pendingPlaybackRate)&&(e.readyPromise&&!i&&(e.readyPromise=null),W(e),e.readyPromise||x(e),e.pendingTask="play",L(e,!1,!1))}function D(e){const t=U.get(this);if(null==e)return void("idle"!=t.animation.playState&&t.animation.cancel());t.pendingTask&&z(t);const n=this.playState;"running"!=n&&"finished"!=n||(j(t,(N(t,e)-N(t,this.startTime))*this.playbackRate),"finished"==n&&0!=C(t)&&(t.holdTime=null),L(t,!1,!1))}function z(e){"pause"==e.pendingTask?function(e){const t=N(e,e.timeline.currentTime);null!=e.startTime&&null==e.holdTime&&(e.holdTime=(t-e.startTime)*e.animation.playbackRate),P(e),e.startTime=null,e.readyPromise.resolve(e.proxy),L(e,!1,!1),W(e),e.pendingTask=null}(e):"play"==e.pendingTask&&function(e){const t=N(e,e.timeline.currentTime);if(null!=e.holdTime)P(e),0==e.animation.playbackRate?e.startTime=t:(e.startTime=t-e.holdTime/e.animation.playbackRate,e.holdTime=null);else if(null!==e.startTime&&null!==e.pendingPlaybackRate){const n=(t-e.startTime)*e.animation.playbackRate;P(e);const i=e.animation.playbackRate;0==i?(e.holdTime=null,e.startTime=t):e.startTime=t-n/i}e.readyPromise&&"pending"==e.readyPromise.state&&e.readyPromise.resolve(e.proxy),L(e,!1,!1),W(e),e.pendingTask=null}(e)}let U=new WeakMap;class H{constructor(e,t,n={}){const i=e instanceof E?e:new E(e,s),r=t instanceof l,s=r?void 0:t;U.set(this,{animation:i,timeline:r?t:void 0,playState:r?"idle":null,readyPromise:null,finishedPromise:null,startTime:null,holdTime:null,previousCurrentTime:null,resetCurrentTimeOnResume:!1,pendingPlaybackRate:null,pendingTask:null,specifiedTiming:null,normalizedTiming:null,effect:null,timeRange:t instanceof ViewTimeline?q(n):null,proxy:this})}get effect(){const e=U.get(this);return e.timeline?(e.effect||(e.effect=function(e){const t=e.animation.effect,n=t.updateTiming,i={apply:function(n){t.getTiming();const i=n.apply(t);if(e.timeline){i.localTime=M(e,i.localTime),i.endTime=M(e,i.endTime),i.activeDuration=M(e,i.activeDuration);const t=_(e);i.duration=t?CSS.percent(100*(i.iterations?(t-i.delay-i.endDelay)/i.iterations:0)/t):CSS.percent(0),void 0===e.timeline.currentTime&&(i.localTime=null)}return i}},r={apply:function(i,r){const s=1e5;if(e.specifiedTiming)return e.specifiedTiming;e.specifiedTiming=i.apply(t);let a,o,l,c=Object.assign({},e.specifiedTiming),u=!1;return e.timeline instanceof ViewTimeline&&(a=function(e){if(!(e.timeline instanceof ViewTimeline))return 0;const t=e.timeRange.start;return y(e.timeline,t.name,t.offset)}(e),o=function(e){if(!(e.timeline instanceof ViewTimeline))return 0;const t=e.timeRange.end;return 1-y(e.timeline,t.name,t.offset)}(e),u=!0),(null===c.duration||"auto"===c.duration||u)&&e.timeline&&(u?(c.delay=a*s,c.endDelay=o*s):(c.delay=0,c.endDelay=0),l=c.iterations?s:0,c.duration=c.iterations?(l-c.delay-c.endDelay)/c.iterations:0,n.apply(t,[c])),e.normalizedTiming=c,e.specifiedTiming}},s={apply:function(n,i,r){if(e.timeline){const e=r[0];if(Infinity===e.duration)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");if(Infinity===e.iterations)throw TypeError("Effect iterations cannot be Infinity when used with Scroll Timelines")}e.specifiedTiming&&n.apply(t,[e.specifiedTiming]),n.apply(t,r),e.specifiedTiming=null}},a=new Proxy(t,{get:function(e,n){const i=e[n];return"function"==typeof i?i.bind(t):i},set:function(e,t,n){return e[t]=n,!0}});return a.getComputedTiming=new Proxy(t.getComputedTiming,i),a.getTiming=new Proxy(t.getTiming,r),a.updateTiming=new Proxy(t.updateTiming,s),a}(e)),e.effect):e.animation.effect}set effect(e){U.get(this).animation.effect=e,details.effect=null}get timeline(){const e=U.get(this);return e.timeline||e.animation.timeline}set timeline(e){const t=this.timeline;if(t==e)return;const n=this.playState,i=this.currentTime,r=U.get(this),s=_(r),c=s>0?N(r,i)/s:0,u=t instanceof l,m=e instanceof l;r.resetCurrentTimeOnResume=!1;const h=this.pending;if(u&&a(r.timeline,r.animation),m){r.timeline=e,P(r);const t=r.animation.playbackRate>=0?0:_(r);switch(n){case"running":case"finished":r.startTime=t,o(r.timeline,r.animation,D.bind(this));break;case"paused":r.resetCurrentTimeOnResume=!0,r.startTime=null,r.holdTime=N(r,CSS.percent(100*c));break;default:r.holdTime=null,r.startTime=null}return h&&(r.readyPromise&&"resolved"!=r.readyPromise.state||x(r),r.pendingTask="paused"==n?"pause":"play"),null!==r.startTime&&(r.holdTime=null),void L(r,!1,!1)}if(r.animation.timeline!=e)throw TypeError("Unsupported timeline: "+e);if(a(r.timeline,r.animation),r.timeline=null,u)switch(null!==i&&(r.animation.currentTime=c*_(r)),n){case"paused":r.animation.pause();break;case"running":case"finished":r.animation.play()}}get startTime(){const e=U.get(this);return e.timeline?M(e,e.startTime):e.animation.startTime}set startTime(e){const t=U.get(this);if(e=N(t,e),!t.timeline)return void(t.animation.startTime=e);null==N(t,t.timeline.currentTime)&&null!=t.startTime&&(t.holdTime=null,W(t));const n=N(t,this.currentTime);P(t),t.startTime=e,t.resetCurrentTimeOnResume=!1,t.holdTime=null!==t.startTime&&0!=t.animation.playbackRate?null:n,t.pendingTask&&(t.pendingTask=null,t.readyPromise.resolve(this)),L(t,!0,!1),W(t)}get currentTime(){const e=U.get(this);return e.timeline?M(e,null!=e.holdTime?e.holdTime:A(e)):e.animation.currentTime}set currentTime(e){const t=U.get(this);if(e=N(t,e),!t.timeline||null==e)return void(t.animation.currentTime=e);const n=t.timeline.phase;null!==t.holdTime||null===t.startTime||"inactive"==n||0==t.animation.playbackRate?t.holdTime=e:t.startTime=O(t,e),t.resetCurrentTimeOnResume=!1,"inactive"==n&&(t.startTime=null),t.previousCurrentTime=null,"pause"==t.pendingTask&&(t.holdTime=e,P(t),t.startTime=null,t.pendingTask=null,t.readyPromise.resolve(this)),L(t,!0,!1)}get playbackRate(){return U.get(this).animation.playbackRate}set playbackRate(e){const t=U.get(this);if(!t.timeline)return void(t.animation.playbackRate=e);t.pendingPlaybackRate=null;const n=this.currentTime;t.animation.playbackRate=e,null!==n&&(this.currentTime=n)}get playState(){const e=U.get(this);if(!e.timeline)return e.animation.playState;const t=N(e,this.currentTime);if(null===t&&null===e.startTime&&null==e.pendingTask)return"idle";if("pause"==e.pendingTask||null===e.startTime&&"play"!=e.pendingTask)return"paused";if(null!=t){if(e.animation.playbackRate>0&&t>=_(e))return"finished";if(e.animation.playbackRate<0&&t<=0)return"finished"}return"running"}get replaceState(){return U.get(this).animation.pending}get pending(){const e=U.get(this);return e.timeline?!!e.readyPromise&&"pending"==e.readyPromise.state:e.animation.pending}finish(){const e=U.get(this);if(!e.timeline)return void e.animation.finish();const t=C(e),n=_(e);if(0==t)throw new DOMException("Cannot finish Animation with a playbackRate of 0.","InvalidStateError");if(t>0&&Infinity==n)throw new DOMException("Cannot finish Animation with an infinite target effect end.","InvalidStateError");P(e);const i=t<0?0:n;this.currentTime=M(e,i);const r=N(e,e.timeline.currentTime);null===e.startTime&&null!==r&&(e.startTime=r-i/e.animation.playbackRate),"pause"==e.pendingTask&&null!==e.startTime&&(e.holdTime=null,e.pendingTask=null,e.readyPromise.resolve(this)),"play"==e.pendingTask&&null!==e.startTime&&(e.pendingTask=null,e.readyPromise.resolve(this)),L(e,!0,!0)}play(){const e=U.get(this);e.timeline?V(e,!0):e.animation.play()}pause(){const e=U.get(this);if(!e.timeline)return void e.animation.pause();if("paused"==this.playState)return;let t=null;const n=e.animation.playbackRate,i=_(e);if(null===e.animation.currentTime)if(n>=0)t=0;else{if(Infinity==i)return void e.animation.pause();t=i}null!==t&&(e.startTime=t),"play"==e.pendingTask?e.pendingTask=null:e.readyPromise=null,e.readyPromise||x(e),e.pendingTask="pause"}reverse(){const e=U.get(this),t=C(e),n=e.resetCurrentTimeOnResume?null:N(e,this.currentTime),i=Infinity==_(e),r=0!=t&&(t<0||n>0||!i);if(!e.timeline||!r)return r&&(e.pendingPlaybackRate=-C(e)),void e.animation.reverse();if("inactive"==e.timeline.phase)throw new DOMException("Cannot reverse an animation with no active timeline","InvalidStateError");this.updatePlaybackRate(-t),V(e,!0)}updatePlaybackRate(e){const t=U.get(this);if(t.pendingPlaybackRate=e,t.timeline){if(!t.readyPromise||"pending"!=t.readyPromise.state)switch(this.playState){case"idle":case"paused":P(t);break;case"finished":const n=N(t,t.timeline.currentTime),i=null!==n?(n-t.startTime)*t.animation.playbackRate:null;t.startTime=0==e?n:null!=n&&null!=i?(n-i)/e:null,P(t),L(t,!1,!1),W(t);break;default:V(t,!1)}}else t.animation.updatePlaybackRate(e)}persist(){U.get(this).animation.persist()}get id(){return U.get(this).animation.id}cancel(){const e=U.get(this);e.timeline?("idle"!=this.playState&&(function(e){e.pendingTask&&(e.pendingTask=null,P(e),e.readyPromise.reject(I()),x(e),e.readyPromise.resolve(e.proxy))}(e),e.finishedPromise&&"pending"==e.finishedPromise.state&&e.finishedPromise.reject(I()),e.finishedPromise=new k,e.animation.cancel()),e.startTime=null,e.holdTime=null,a(e.timeline,e.animation)):e.animation.cancel()}get onfinish(){return U.get(this).animation.onfinish}set onfinish(e){U.get(this).animation.onfinish=e}get oncancel(){return U.get(this).animation.oncancel}set oncancel(e){U.get(this).animation.oncancel=e}get onremove(){return U.get(this).animation.onremove}set onremove(e){U.get(this).animation.onremove=e}get finished(){const e=U.get(this);return e.timeline?(e.finishedPromise||(e.finishedPromise=new k),e.finishedPromise.promise):e.animation.finished}get ready(){const e=U.get(this);return e.timeline?(e.readyPromise||(e.readyPromise=new k,e.readyPromise.resolve(this)),e.readyPromise.promise):e.animation.ready}addEventListener(e,t,n){U.get(this).animation.addEventListener(e,t,n)}removeEventListener(e,t,n){U.get(this).animation.removeEventListener(e,t,n)}dispatchEvent(e){U.get(this).animation.dispatchEvent(e)}}function F(e,t){if(!e)return null;const n=e.split(" ");if(!w.includes(n[0])||2==n.length&&!n[1].endsWith("%"))throw TypeError("Invalid animation delay");let i=t;if(2==n.length){const e=parseFloat(n[1]);if(Number.isNaN(e))throw TypeError(`"${n[1]}" is not a valid percentage for animation delay`);i=CSS.percent(e)}return{name:n[0],offset:i}}function $(){return{name:"cover",offset:CSS.percent(0)}}function K(){return{name:"cover",offset:CSS.percent(100)}}function q(e){const t=B(e["animation-time-range"]);return e["animation-delay"]&&(t.start=F(e["animation-delay"],$().offset)),e["animation-end-delay"]&&(t.end=F(e["animation-end-delay"],K().offset)),t}function B(e){const t={start:$(),end:K()};if(!e)return t;const n=e.split(" "),i=[],r=[];if(n.forEach(e=>{e.endsWith("%")?r.push(parseFloat(e)):i.push(e)}),i.length>2||r.length>2||1==r.length)throw TypeError("Invalid time range");return i.length&&(t.start.name=i[0],t.end.name=i.length>1?i[1]:i[0]),r.length>1&&(t.start.offset=CSS.percent(r[0]),t.end.offset=CSS.percent(r[1])),t}function Y(e,t){const n=t.timeline;n instanceof l&&delete t.timeline;const i=(e,t)=>{if(t in e){const n=e[t];return"number"!=typeof n?(delete e[t],n):null}},r=(e,t)=>{t&&(t.phase&&(e.name=t.phase),t.percent&&(e.offset=t.percent))},s=i(t,"delay"),a=i(t,"endDelay"),o=b.apply(this,[e,t]),c=new H(o,n);if(n instanceof l){if(o.pause(),n instanceof ViewTimeline){const e=U.get(c);e.timeRange=B(t.timeRange),r(e.timeRange.start,s),r(e.timeRange.end,a)}c.play()}return c}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Q.apply(this,arguments)}const G={IDENTIFIER:/[\w\\\@_-]+/g,WHITE_SPACE:/\s*/g,NUMBER:/^[0-9]+/,TIME:/^[0-9]+(s|ms)/,SCROLL_TIMELINE:/scroll-timeline\s*:([^;}]+)/,SCROLL_TIMELINE_NAME:/scroll-timeline-name\s*:([^;}]+)/,SCROLL_TIMELINE_AXIS:/scroll-timeline-axis\s*:([^;}]+)/,VIEW_TIMELINE:/view-timeline\s*:([^;}]+)/,VIEW_TIMELINE_NAME:/view-timeline-name\s*:([^;}]+)/,VIEW_TIMELINE_AXIS:/view-timeline-axis\s*:([^;}]+)/,VIEW_TIMELINE_INSET:/view-timeline-inset\s*:([^;}]+)/,ANIMATION_TIMELINE:/animation-timeline\s*:([^;}]+)/,ANIMATION_DELAY:/animation-delay\s*:([^;}]+)/,ANIMATION_END_DELAY:/animation-end-delay\s*:([^;}]+)/,ANIMATION_TIME_RANGE:/animation-time-range\s*:([^;}]+)/,ANIMATION_NAME:/animation-name\s*:([^;}]+)/,ANIMATION:/animation\s*:([^;}]+)/,ANONYMOUS_SCROLL:/scroll\(([^)]*)\)/},X=["block","inline","vertical","horizontal"],J=["nearest","root"],Z=new class{constructor(){this.cssRulesWithTimelineName=[],this.nextAnonymousTimelineNameIndex=0,this.anonymousScrollTimelineOptions=new Map,this.sourceSelectorToScrollTimeline=[],this.subjectSelectorToViewTimeline=[],this.keyframeNamesSelectors=new Map}transpileStyleSheet(e,t,n){const i={sheetSrc:e,index:0,name:n};for(;i.index<i.sheetSrc.length&&(this.eatWhitespace(i),!(i.index>=i.sheetSrc.length));){if(this.lookAhead("/*",i)){for(;this.lookAhead("/*",i);)this.eatComment(i),this.eatWhitespace(i);continue}const e=this.parseQualifiedRule(i);e&&(t?this.parseKeyframesAndSaveNameMapping(e,i):this.handleScrollTimelineProps(e,i))}return i.sheetSrc}getAnimationTimelineOptions(e,t){for(let n=this.cssRulesWithTimelineName.length-1;n>=0;n--){const i=this.cssRulesWithTimelineName[n];if(t.matches(i.selector)&&(!i["animation-name"]||i["animation-name"]==e))return{"animation-timeline":i["animation-timeline"],"animation-delay":i["animation-delay"],"animation-end-delay":i["animation-end-delay"],"animation-time-range":i["animation-time-range"]}}return null}getAnonymousScrollTimelineOptions(e,t){const n=this.anonymousScrollTimelineOptions.get(e);return n?{anonymousSource:n.source,anonymousTarget:t,source:u(n.source,t),orientation:n.orientation?n.orientation:"block"}:null}getScrollTimelineOptions(e,t){const n=this.getAnonymousScrollTimelineOptions(e,t);if(n)return n;for(let n=this.sourceSelectorToScrollTimeline.length-1;n>=0;n--){const i=this.sourceSelectorToScrollTimeline[n];if(i.name==e){const e=this.findPreviousSiblingOrAncestorMatchingSelector(t,i.selector);if(e)return Q({source:e},i.axis?{orientation:i.axis}:{})}}return null}findPreviousSiblingOrAncestorMatchingSelector(e,t){let n=e;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling||n.parentElement}return null}getViewTimelineOptions(e,t){for(let n=this.subjectSelectorToViewTimeline.length-1;n>=0;n--){const i=this.subjectSelectorToViewTimeline[n];if(i.name==e){const e=this.findPreviousSiblingOrAncestorMatchingSelector(t,i.selector);if(e)return{subject:e,axis:i.axis,inset:i.inset}}}return null}parseScrollTimeline(e){const t=e.index;this.assertString(e,"@scroll-timeline"),this.eatWhitespace(e);let n=this.parseIdentifier(e);this.eatWhitespace(e),this.assertString(e,"{"),this.eatWhitespace(e);let i={name:n,source:"auto",orientation:void 0};for(;"}"!==this.peek(e);){const t=this.parseIdentifier(e);this.eatWhitespace(e),this.assertString(e,":"),this.eatWhitespace(e),i[t]=this.removeEnclosingDoubleQuotes(this.eatUntil(";",e)),this.assertString(e,";"),this.eatWhitespace(e)}this.assertString(e,"}");const r=e.index;return this.eatWhitespace(e),{scrollTimeline:i,startIndex:t,endIndex:r}}handleScrollTimelineProps(e,t){if(e.selector.includes("@keyframes"))return;const n=e.block.contents.includes("animation-name:"),i=e.block.contents.includes("animation-timeline:"),r=e.block.contents.includes("animation:");this.saveSourceSelectorToScrollTimeline(e),this.saveSubjectSelectorToViewTimeline(e);let s=[],a=[],o=!1;i&&(s=this.extractScrollTimelineNames(e.block.contents)),n&&(a=this.extractMatches(e.block.contents,G.ANIMATION_NAME)),i&&n||(r&&this.extractMatches(e.block.contents,G.ANIMATION).forEach(t=>{const n=this.extractTimelineName(t);n.timelineName&&s.push(n.timelineName);const r=this.extractAnimationName(t);r&&(n.timelineName||i)&&a.push(r),(n.timelineName||i)&&(this.hasDuration(t)||(e.block.contents=e.block.contents.replace(t," 1s "+t),o=!0)),n.toBeReplaced&&(e.block.contents=e.block.contents.replace(n.toBeReplaced," ".repeat(n.toBeReplaced.length)),o=!0)}),o&&this.replacePart(e.block.startIndex,e.block.endIndex,e.block.contents,t)),this.saveRelationInList(e,s,a)}saveSourceSelectorToScrollTimeline(e){const t=e.block.contents.includes("scroll-timeline:"),n=e.block.contents.includes("scroll-timeline-name:"),i=e.block.contents.includes("scroll-timeline-axis:");if(!t&&!n)return;let r=[];if(t){const t=this.extractMatches(e.block.contents,G.SCROLL_TIMELINE);for(const n of t){parts=this.split(n);let t={selector:e.selector,name:""};1==parts.length?t.name=parts[0]:2==parts.length&&(X.includes(parts[0])?(t.axis=parts[0],t.name=parts[1]):(t.axis=parts[1],t.name=parts[0])),r.push(t)}}if(n){const t=this.extractMatches(e.block.contents,G.SCROLL_TIMELINE_NAME);for(let n=0;n<t.length;n++)n<r.length?r[n].name=t[n]:r.push({selector:e.selector,name:t[n]})}let s=[];i&&(s=this.extractMatches(e.block.contents,G.SCROLL_TIMELINE_AXIS),s=s.filter(e=>X.includes(e)));for(let e=0;e<r.length;e++)s.length&&(r[e].axis=s[e%r.length]);this.sourceSelectorToScrollTimeline.push(...r)}saveSubjectSelectorToViewTimeline(e){const t=e.block.contents.includes("view-timeline:"),n=e.block.contents.includes("view-timeline-name:"),i=e.block.contents.includes("view-timeline-axis:"),r=e.block.contents.includes("view-timeline-inset:");if(!t&&!n)return;let s=[];if(t){const t=this.extractMatches(e.block.contents,G.VIEW_TIMELINE);for(let n of t){parts=this.split(n);let t={selector:e.selector,name:"",inset:null};1==parts.length?t.name=parts[0]:2==parts.length&&(X.includes(parts[0])?(t.axis=parts[0],t.name=parts[1]):(t.axis=parts[1],t.name=parts[0])),s.push(t)}}if(n){const t=this.extractMatches(e.block.contents,G.VIEW_TIMELINE_NAME);for(let n=0;n<t.length;n++)n<s.length?s[n].name=t[n]:s.push({selector:e.selector,name:t[n],inset:null})}let a=[],o=[];r&&(a=this.extractMatches(e.block.contents,G.VIEW_TIMELINE_INSET)),i&&(o=this.extractMatches(e.block.contents,G.VIEW_TIMELINE_AXIS),o=o.filter(e=>X.includes(e)));for(let e=0;e<s.length;e++)a.length&&(s[e].inset=a[e%s.length]),o.length&&(s[e].axis=o[e%s.length]);this.subjectSelectorToViewTimeline.push(...s)}hasDuration(e){return e.split(" ").filter(e=>G.TIME.exec(e)).length>=1}saveRelationInList(e,t,n){const i=e.block.contents.includes("animation-delay:"),r=e.block.contents.includes("animation-end-delay:"),s=e.block.contents.includes("animation-time-range:");let a=[],o=[],l=[];i&&(a=this.extractMatches(e.block.contents,G.ANIMATION_DELAY)),r&&(o=this.extractMatches(e.block.contents,G.ANIMATION_END_DELAY)),s&&(l=this.extractMatches(e.block.contents,G.ANIMATION_TIME_RANGE));const c=Math.max(t.length,n.length,a.length,o.length,l.length);for(let i=0;i<c;i++)this.cssRulesWithTimelineName.push(Q({selector:e.selector,"animation-timeline":t[i%t.length]},n.length?{"animation-name":n[i%n.length]}:{},a.length?{"animation-delay":a[i%a.length]}:{},o.length?{"animation-end-delay":o[i%o.length]}:{},l.length?{"animation-time-range":l[i%l.length]}:{}))}extractScrollTimelineNames(e){const t=G.ANIMATION_TIMELINE.exec(e)[1].trim(),n=[];return t.split(",").map(e=>e.trim()).forEach(e=>{if(function(e){return e.startsWith("scroll")&&e.includes("(")}(e)){const t=this.saveAnonymousTimelineName(e);n.push(t)}else n.push(e)}),n}saveAnonymousTimelineName(e){const t=":t"+this.nextAnonymousTimelineNameIndex++;return this.anonymousScrollTimelineOptions.set(t,this.parseAnonymousTimeline(e)),t}parseAnonymousTimeline(e){const t=G.ANONYMOUS_SCROLL.exec(e);if(!t)return null;const n={};return t[1].split(" ").forEach(e=>{X.includes(e)?n.orientation=e:J.includes(e)&&(n.source=e)}),n}extractAnimationName(e){return this.findMatchingEntryInContainer(e,this.keyframeNamesSelectors)}extractTimelineName(e){let t=null,n=null;const i=G.ANONYMOUS_SCROLL.exec(e);if(i){const e=i[0];t=this.saveAnonymousTimelineName(e),n=e}else t=this.findMatchingEntryInContainer(e,new Set(this.sourceSelectorToScrollTimeline.map(e=>e.name)))||this.findMatchingEntryInContainer(e,new Set(this.subjectSelectorToViewTimeline.map(e=>e.name))),n=t;return{timelineName:t,toBeReplaced:n}}findMatchingEntryInContainer(e,t){const n=e.split(" ").filter(e=>t.has(e));return n?n[0]:null}parseIdentifier(e){G.IDENTIFIER.lastIndex=e.index;const t=G.IDENTIFIER.exec(e.sheetSrc);if(!t)throw this.parseError(e,"Expected an identifier");return e.index+=t[0].length,t[0]}parseKeyframesAndSaveNameMapping(e,t){if(e.selector.startsWith("@keyframes")){const n=this.replaceKeyframesAndGetMapping(e,t);e.selector.split(" ").forEach((e,t)=>{t>0&&this.keyframeNamesSelectors.set(e,n)})}}replaceKeyframesAndGetMapping(e,t){const n=e.block.contents,i=function(e){let t=0,n=-1,i=-1;const r=[];for(let s=0;s<e.length;s++)"{"==e[s]?t++:"}"==e[s]&&t--,1==t&&"{"!=e[s]&&"}"!=e[s]&&-1==n&&(n=s),2==t&&"{"==e[s]&&(i=s,r.push({start:n,end:i}),n=i=-1);return r}(n);if(0==i.length)return new Map;const r=new Map;let s=!1;const a=[];a.push(n.substring(0,i[0].start));for(let e=0;e<i.length;e++){const t=n.substring(i[e].start,i[e].end);let o=[];t.split(",").forEach(e=>{const t=e.split(" ").map(e=>e.trim()).filter(e=>""!=e).join(" "),n=r.size;var i;r.set(n,t),o.push(`${n}%`),i=t,w.some(e=>i.startsWith(e))&&(s=!0)}),a.push(o.join(",")),a.push(e==i.length-1?n.substring(i[e].end):n.substring(i[e].end,i[e+1].start))}return s?(e.block.contents=a.join(""),this.replacePart(e.block.startIndex,e.block.endIndex,e.block.contents,t),r):new Map}parseQualifiedRule(e){const t=e.index,n=this.parseSelector(e).trim();if(n)return{selector:n,block:this.eatBlock(e),startIndex:t,endIndex:e.index}}removeEnclosingDoubleQuotes(e){return e.substring('"'==e[0]?1:0,'"'==e[e.length-1]?e.length-1:e.length)}assertString(e,t){if(e.sheetSrc.substr(e.index,t.length)!=t)throw this.parseError(e,`Did not find expected sequence ${t}`);e.index+=t.length}replacePart(e,t,n,i){i.sheetSrc=i.sheetSrc.slice(0,e)+n+i.sheetSrc.slice(t),i.index>=t&&(i.index=e+n.length+(i.index-t))}eatComment(e){this.assertString(e,"/*"),this.eatUntil("*/",e,!0),this.assertString(e,"*/")}eatBlock(e){const t=e.index;this.assertString(e,"{");let n=1;for(;0!=n;)this.lookAhead("/*",e)?this.eatComment(e):("{"===e.sheetSrc[e.index]?n++:"}"===e.sheetSrc[e.index]&&n--,this.advance(e));const i=e.index;return{startIndex:t,endIndex:i,contents:e.sheetSrc.slice(t,i)}}advance(e){if(e.index++,e.index>e.sheetSrc.length)throw this.parseError(e,"Advanced beyond the end")}eatUntil(e,t,n=!1){const i=t.index;for(;!this.lookAhead(e,t);)this.advance(t);return n&&(t.sheetSrc=t.sheetSrc.slice(0,i)+" ".repeat(t.index-i)+t.sheetSrc.slice(t.index)),t.sheetSrc.slice(i,t.index)}parseSelector(e){let t=e.index;if(this.eatUntil("{",e),t===e.index)throw Error("Empty selector");return e.sheetSrc.slice(t,e.index)}eatWhitespace(e){G.WHITE_SPACE.lastIndex=e.index;const t=G.WHITE_SPACE.exec(e.sheetSrc);t&&(e.index+=t[0].length)}lookAhead(e,t){return t.sheetSrc.substr(t.index,e.length)==e}peek(e){return e.sheetSrc[e.index]}extractMatches(e,t,n=","){return t.exec(e)[1].trim().split(n).map(e=>e.trim())}split(e){return e.split(" ").map(e=>e.trim()).filter(e=>""!=e)}};function ee(e,t,n,i,r,s){return S(T(e,t,n,i,r),s,T("cover",t,n,i,r))}if(function(){if(CSS.supports("animation-timeline: works"))return;!function(){function e(e){if(0===e.innerHTML.trim().length)return;let t=Z.transpileStyleSheet(e.innerHTML,!0);t=Z.transpileStyleSheet(t,!1),e.innerHTML=t}new MutationObserver(t=>{for(const n of t)for(const t of n.addedNodes)t instanceof HTMLStyleElement&&e(t)}).observe(document.documentElement,{childList:!0,subtree:!0}),document.querySelectorAll("style").forEach(t=>e(t)),document.querySelectorAll("link").forEach(e=>{})}();let e=new WeakMap;window.addEventListener("animationstart",t=>{t.target.getAnimations().filter(e=>e.animationName===t.animationName).forEach(n=>{e.has(t.target)||e.set(t.target,new Map);const i=e.get(t.target);if(!i.has(n.animationName)){const e=function(e,t,n){const i=Z.getAnimationTimelineOptions(t,n);if(!i)return null;const r=i["animation-timeline"];if(!r)return null;let s=Z.getScrollTimelineOptions(r,n)||Z.getViewTimelineOptions(r,n);return s?(s.subject&&function(e,t){const n=p(t.subject),i=t.axis||t.orientation,r=Z.keyframeNamesSelectors.get(e.animationName);if(r&&r.size){const s=[];e.effect.getKeyframes().forEach(e=>{const a=function(e,r){let s=null;for(const[a,o]of e)if(a==100*r.offset){if("from"==o)s=0;else if("to"==o)s=100;else{const e=o.split(" ");s=1==e.length?parseFloat(e[0]):100*ee(e[0],n,t.subject,i,t.inset,CSS.percent(parseFloat(e[1])))}break}return s}(r,e);null!==a&&a>=0&&a<=100&&(e.offset=a/100,s.push(e))});const a=s.sort((e,t)=>e.offset<t.offset?-1:e.affset>t.offset?1:0);e.effect.setKeyframes(a)}}(e,s),{timeline:s.source?new l(s):new v(s),animOptions:i}):null}(n,n.animationName,t.target);i.set(n.animationName,e&&e.timeline&&n.timeline!=e.timeline?new H(n,e.timeline,e.animOptions):null)}const r=i.get(n.animationName);null!==r&&(n.pause(),r.play())})})}(),[...document.styleSheets].filter(e=>null!==e.href).length&&console.warn("Non-Inline StyleSheets detected: ScrollTimeline polyfill currently only supports inline styles within style tags"),!Reflect.defineProperty(window,"ScrollTimeline",{value:l}))throw Error("Error installing ScrollTimeline polyfill: could not attach ScrollTimeline to window");if(!Reflect.defineProperty(window,"ViewTimeline",{value:v}))throw Error("Error installing ViewTimeline polyfill: could not attach ViewTimeline to window");if(!Reflect.defineProperty(Element.prototype,"animate",{value:Y}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's animate to DOM Element");if(!Reflect.defineProperty(window,"Animation",{value:H}))throw Error("Error installing Animation constructor.");export{H as ProxyAnimation,l as ScrollTimeline,v as ViewTimeline,Y as animate};
//# sourceMappingURL=scroll-timeline.modern.js.map
